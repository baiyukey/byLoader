window.onload=function(){var k=document.getElementsByTagName("script");var a=null;var b=[],g=[];var f="";for(var d=0;d<k.length;d++){a=k[d].getAttribute("src").indexOf("byLoader")>=0?k[d]:null}if(a===null&&console.log){console.log("byLoader没有指定data-media属性.");return false}if(!a.getAttribute("data-media-dir")&&console.log){console.log("byLoader没有指定data-media属性.");return false}else{f=a.getAttribute("data-media-dir")}if(!a.getAttribute("data-css")&&a.src.indexOf(".min")<0&&console.log){console.log("byLoader没有指定data-css属性.")}else{g=a.getAttribute("data-css").split(",")}if(!a.getAttribute("data-js")&&a.src.indexOf(".min")<0&&console.log){console.log("byLoader没有指定data-js属性.")}else{b=a.getAttribute("data-js").split(",")}var e=location.pathname.split("/")[1]=="static"?"/static":"/";var j=location.pathname.replace(e,"").replace(".html","");var c="modules/"+j;window.min=/^((192\.168|172\.([1][6-9]|[2]\d|3[01]))(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){2}|10(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){3})|(localhost)$/.test(window.location.hostname)?"":".min";Array.prototype.removeRepeat=function(){var l=this;var n=[];var m={};for(var o=0;o<l.length;o++){if(!m[l[o]]){n.push(l[o]);m[l[o]]=true}}return n};window.byLoader={loadJs:function(l,i,o){if(window.localStorage){var n;var m=localStorage.getItem(l);if(m==null||m.length==0||byLoader.reVersion()!=localStorage.getItem("version")){if(window.XMLHttpRequest){n=new XMLHttpRequest()}else{if(window.ActiveXObject){n=new ActiveXObject("Microsoft.XMLHTTP")}}if(n!=null){n.open("GET",i+".js");n.send(null);n.onreadystatechange=function(){if(n.readyState==4&&n.status==200){m=n.responseText;localStorage.setItem(l,m);m=m==null?"":m;byLoader.writeJs(l,m);if(o!=null){o()}}}}}else{byLoader.writeJs(l,m);if(o!=null){o()}}}else{byLoader.linkJs(i+".js")}},loadCss:function(l,i,o){if(window.localStorage){var n;var m=localStorage.getItem(l);if(m==null||m.length==0||byLoader.reVersion()!=localStorage.getItem("version")){if(window.XMLHttpRequest){n=new XMLHttpRequest()}else{if(window.ActiveXObject){n=new ActiveXObject("Microsoft.XMLHTTP")}}if(n!=null){n.open("GET",i+".css");n.send(null);n.onreadystatechange=function(){if(n.readyState==4&&n.status==200){m=n.responseText;m=m==null?"":m;m=m.replace(/\/byAdmin\/media\/user\//g,f);localStorage.setItem(l,m);byLoader.writeCss(l,m);if(o!=null){o()}}}}}else{byLoader.writeCss(l,m);if(o!=null){o()}}}else{byLoader.linkCss(i+".css")}},writeJs:function(i,n){var l=document.getElementsByTagName("HEAD").item(0);var m=document.createElement("script");m.setAttribute("type","text/javascript");m.setAttribute("data-name",i);if(i.indexOf("require")>0){m.setAttribute("data-main",f+"js/"+c+window.min)}m.innerHTML=n;l.appendChild(m)},writeCss:function(i,n){var l=document.getElementsByTagName("HEAD").item(0);var m=document.createElement("style");m.setAttribute("type","text/css");m.setAttribute("data-name",i);m.innerHTML=n;l.appendChild(m)},linkJs:function(i){var l=document.getElementsByTagName("HEAD").item(0);var m=document.createElement("script");if(i.indexOf("require.js")>0){m.setAttribute("data-main",f+"js/"+c+window.min)}m.src=i;l.appendChild(m)},linkCss:function(i){var l=document.getElementsByTagName("HEAD").item(0);var m=document.createElement("link");m.type="text/css";m.rel="stylesheet";m.rev="stylesheet";m.media="screen";m.href=i;l.appendChild(m)},loadSort:function(p,l,o){var q=-1;var r=p;var n=l.removeRepeat();var m=o.toUpperCase();function s(u){var t=typeof(u)!="undefined"?u:{};var i=function(){q++;if(q>=n.length){if(typeof(t.callBack)!="undefined"){t.callBack.call(this)}return false}else{if(m==="JS"){byLoader.loadJs(n[q],r+n[q],i)}if(m==="CSS"){byLoader.loadCss(n[q],r+n[q],i)}}};i()}this.execute=s},reVersion:function(){return window.min===""?""+new Date().getTime():""+new Date().getMonth()+new Date().getDate()+Math.ceil((new Date().getHours()+1)/2)},setVersion:function(){localStorage.setItem("version",byLoader.reVersion())}};var h=function(){g.push(j);if(b.indexOf("require")<0){b.push(c)}var i=new byLoader.loadSort(f+"css/",g,"css");var m=new byLoader.loadSort(f+"js/",b,"js");var l=function(){m.execute({callBack:byLoader.setVersion})};i.execute({callBack:l})};h()};