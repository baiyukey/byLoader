window.onload=function(){var m=document.getElementsByTagName("script");var a=null;var b=[],j=[];var h="";for(var f=0;f<m.length;f++){a=m[f].getAttribute("src").indexOf("byLoader")>=0?m[f]:null}if(a===null&&console.log){console.log("byLoader没有指定data-media属性.");return false}if(!a.getAttribute("data-media-dir")&&console.log){console.log("byLoader没有指定data-media属性.");return false}else{h=a.getAttribute("data-media-dir")}if(!a.getAttribute("data-css")&&a.src.indexOf("byLoader")>=0&&console.log){console.log("byLoader没有指定data-css属性.")}else{j=a.getAttribute("data-css").split(",")}if(!a.getAttribute("data-js")&&a.src.indexOf("byLoader")>0&&console.log){console.log("byLoader没有指定data-js属性.")}else{b=a.getAttribute("data-js").split(",")}var g=location.pathname.split("/")[1]=="static"?"/static":"/";var l=location.pathname.replace(g,"").replace(".html","");var e="modules/"+l;var d=/^((192\.168|172\.([1][6-9]|[2]\d|3[01]))(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){2}|10(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){3})|(localhost)$/.test(window.location.hostname)?"":".min";var c=d===""?""+new Date().getTime():""+new Date().getMonth()+new Date().getDate()+Math.ceil((new Date().getHours()+1)/2);Array.prototype.removeRepeat=function(){var n=this;var p=[];var o={};for(var q=0;q<n.length;q++){if(!o[n[q]]){p.push(n[q]);o[n[q]]=true}}return p};window.byLoader={loadJs:function(n,i,q){if(window.localStorage){var p;var o=localStorage.getItem(n);if(o==null||o.length==0||c!=localStorage.getItem("version")){if(window.XMLHttpRequest){p=new XMLHttpRequest()}else{if(window.ActiveXObject){p=new ActiveXObject("Microsoft.XMLHTTP")}}if(p!=null){p.open("GET",i+".js");p.send(null);p.onreadystatechange=function(){if(p.readyState==4&&p.status==200){o=p.responseText;localStorage.setItem(n,o);o=o==null?"":o;byLoader.writeJs(n,o);if(q!=null){q()}}}}}else{byLoader.writeJs(n,o);if(q!=null){q()}}}else{byLoader.linkJs(i+".js")}},loadCss:function(n,i,q){if(window.localStorage){var p;var o=localStorage.getItem(n);if(o==null||o.length==0||c!=localStorage.getItem("version")){if(window.XMLHttpRequest){p=new XMLHttpRequest()}else{if(window.ActiveXObject){p=new ActiveXObject("Microsoft.XMLHTTP")}}if(p!=null){p.open("GET",i+".css");p.send(null);p.onreadystatechange=function(){if(p.readyState==4&&p.status==200){o=p.responseText;o=o==null?"":o;o=o.replace(/\/byAdmin\/media\/user\//g,h);localStorage.setItem(n,o);byLoader.writeCss(n,o);if(q!=null){q()}}}}}else{byLoader.writeCss(n,o);if(q!=null){q()}}}else{byLoader.linkCss(i+".css")}},writeJs:function(i,p){var n=document.getElementsByTagName("HEAD").item(0);var o=document.createElement("script");o.setAttribute("type","text/javascript");o.setAttribute("data-name",i);if(i.indexOf("require")>0){o.setAttribute("data-main",h+"js/"+e+d)}o.innerHTML=p;n.appendChild(o)},writeCss:function(i,p){var n=document.getElementsByTagName("HEAD").item(0);var o=document.createElement("style");o.setAttribute("type","text/css");o.setAttribute("data-name",i);o.innerHTML=p;n.appendChild(o)},linkJs:function(i){var n=document.getElementsByTagName("HEAD").item(0);var o=document.createElement("script");if(i.indexOf("require.js")>0){o.setAttribute("data-main",h+"js/"+e+d)}o.src=i;n.appendChild(o)},linkCss:function(i){var n=document.getElementsByTagName("HEAD").item(0);var o=document.createElement("link");o.type="text/css";o.rel="stylesheet";o.rev="stylesheet";o.media="screen";o.href=i;n.appendChild(o)},loadSort:function(r,n,q){var s=-1;var t=r;var p=n.removeRepeat();var o=q.toUpperCase();function u(w){var v=typeof(w)!="undefined"?w:{};var i=function(){s++;if(s>=p.length){if(typeof(v.callBack)!="undefined"){v.callBack.call(this)}return false}else{if(o==="JS"){byLoader.loadJs(p[s],t+p[s],i)}if(o==="CSS"){byLoader.loadCss(p[s],t+p[s],i)}}};i()}this.execute=u},setVersion:function(){localStorage.setItem("version",c)}};var k=function(){j.push(l);if(b.indexOf("require")<0){b.push(e)}var i=new byLoader.loadSort(h+"css/",j,"css");var o=new byLoader.loadSort(h+"js/",b,"js");var n=function(){o.execute({callBack:byLoader.setVersion})};i.execute({callBack:n})};k()};