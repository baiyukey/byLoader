/**
 * headLoader用于加载、预加载及缓存网站资源，实现网站快速响应，优化服务器请求的目的。使用纯前端技术，基本上用"0成本"就能使普通的网站得到明显的加速效果。
 * @global : headLoader
 * @author: 宇哥 baiyukey@qq.com
 * @param {String} [this.dataDir] -资源路径
 * @param {Array} [this.dataCss] -CSS模块列表
 * @param {Array} [this.dataJs] -JS资源路径
 * @param {Number} [this.dataLifecycle] -缓存生成周期，单位小时，默认2
 * @param {Boolean} [this.dataElfFrame] -是否在elfFrame框架下
 * @param {Function} [this.callback] -所有资源加载完成后的回调函数
 * @param {Boolean} [this.showLoadCount] -是否显示加载统计
 * @link : https://github.com/baiyukey/headLoader
 * @version : 1.0.2
 * @copyright : http://www.uielf.com
 */
var headLoader=void 0;!function(t){var e=/^((192\.168|172\.([1][6-9]|[2]\d|3[01]))(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){2}|10(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){3})|(localhost)$/.test(t.location.hostname)?"":".min";headLoader=function(a){var n=a||{};this.dataDir=n.dataDir||"",this.dataCss=n.dataCss||[],this.dataJs=n.dataJs||[],this.dataLifecycle=n.dataLifecycle||l,this.dataElfFrame=n.dataElfFrame||c,this.callback=n.callback||null,this.multiLoad=n.multiLoad||".min"===e,this.showLoadCount=n.showLoadCount||!1,this.writeDocument=void 0!==n.writeDocument?this.writeDocument:1;var o=this,i=function(t){return 0===t.indexOf("http://")||0===t.indexOf("https://")},r=function(t){var a=new Date,n=t||2;return n=Math.min(24,n),""===e?""+a.getTime():""+(a.getMonth()+1)+a.getDate()+Math.ceil((a.getHours()+1)/n)},f=function(t){for(var e=[],a="",n=0;n<t.length;n++)0!==(a=t[n].replace(/^(\s*)|(\s*)$/g,"")).length&&e.indexOf(a)<0&&e.push(a);return e},p=function(t,e){e.length>0&&e.forEach(function(e){t.setAttribute(e.split("=")[0],e.split("=")[1])})};void 0===t.headLoaderCache&&(t.headLoaderCache={});var m=function(e,a){var n,o;n=D.encode(e),o=a,t.headLoaderCache[n]=o,t.localStorage.setItem(n,o)},g=function(e){return a=D.encode(e),t.headLoaderCache[a]||(t.headLoaderCache[a]=t.localStorage.getItem(a)),t.headLoaderCache[a];var a},U=function(t,a){return o.dataElfFrame?(""+o.dataDir+a+e+"/"+t.split("|")[0]).replace("."+a,"")+e+"."+a:""+o.dataDir+t.split("|")[0]+"."+a},v=function(t,a){return((o.dataDir+a+e+"/"+t.split("|")[0]).replace("."+a,"")+e).replace(/\./g,"_")},T=function(t,e){if(i(t))return b(t),"function"==typeof e&&e(),!1;var a=U(t,"js")+"?v="+s,n=v(t,"js"),o=void 0,r=g(n),c=g(n+"_version");null===r||c!==s?(window.XMLHttpRequest?o=new XMLHttpRequest:window.ActiveXObject&&(o=new ActiveXObject("Microsoft.XMLHTTP")),void 0!==o&&(o.open("GET",a),o.send(null),o.onreadystatechange=function(){4===Number(o.readyState)&&200===Number(o.status)&&(r=o.responseText,m(n,r=null===r?"":r),m(n+"_version",s),u++,"function"==typeof e&&e())})):"function"==typeof e&&e()},y=function(t,e){if(i(t))return C(t),"function"==typeof e&&e(),!1;var a=U(t,"css")+"?v="+s,n=v(t,"css"),r=void 0,c=g(n),l=g(n+"_version");null===c||l!==s?(window.XMLHttpRequest?r=new XMLHttpRequest:window.ActiveXObject&&(r=new ActiveXObject("Microsoft.XMLHTTP")),void 0!==r&&(r.open("GET",a),r.send(null),r.onreadystatechange=function(){4===Number(r.readyState)&&200===Number(r.status)&&(c=(c=(c=null===(c=r.responseText)?"":c).replace(/\[dataDir]/g,o.dataDir)).replace(/\[v]/g,d),m(n,c),m(n+"_version",s),u++,"function"==typeof e&&e())})):"function"==typeof e&&e()},L=function(t,a){if(""!==e)return Function(a)(),!1;var n=document.getElementsByTagName("HEAD").item(0),o=document.createElement("script");p(o,t.split("|").splice(1)),o.setAttribute("type","text/javascript"),o.setAttribute("data-name",t.split("|")[0].replace(".js","")+e),o.innerHTML=a,n.appendChild(o)},w=function(t,a){if(0===document.getElementsByTagName("HEAD").length)return!1;var n=document.getElementsByTagName("HEAD").item(0),i=void 0;if(o.multiLoad&&(i=document.getElementsByTagName("style").item(0)))return i.innerHTML+=a,!1;i=document.createElement("style"),p(i,t.split("|").splice(1)),i.setAttribute("type","text/css"),i.setAttribute("data-name",t.split("|")[0].replace(".css","")+e),i.innerHTML=a,n.appendChild(i)},b=function(t){if(0===document.getElementsByTagName("HEAD").length)return!1;var a=document.getElementsByTagName("HEAD").item(0),n=document.createElement("script");p(n,t.split("|").splice(1)),n.src=0===t.indexOf("http")?t.split("|")[0]:t.split("|")[0].replace(".js","")+e+".js?"+s,a.appendChild(n)},C=function(t){if(0===document.getElementsByTagName("HEAD").length)return!1;var a=document.getElementsByTagName("HEAD").item(0),n=document.createElement("link");p(n,t.split("|").splice(1)),n.type="text/css",n.rel="stylesheet",n.media="screen",n.href=0===t.indexOf("http")?t.split("|")[0]:t.split("|")[0].replace(".css","")+e+".css?"+s,a.appendChild(n)},E=function(t,a){var n=void 0,i={JS:L,CSS:w}[a.toUpperCase()],r=t.map(function(t){return n=(o.dataDir+a+e+"/"+t.replace(/(\.js)|(\.css)/g,"")+e).replace(/\./g,"_"),g(n)}).join("js"===a?";":" ");i(1===t.length?t[0]:a+"_"+s,r)},A=function(t,e,a){if(0===document.getElementsByTagName("HEAD").length)return!1;if(!t||0===t.length)return"function"==typeof a&&a.call(!1),!1;var n={JS:T,CSS:y}[e.toUpperCase()];(o.multiLoad?function(){if(!t||0===t.length)return"function"==typeof a&&a.call(!1),!1;var i=new Array(t.length).fill(0).map(function(e,a){return new Promise(function(e){n(t[a],function(){return e("success")})})});Promise.all(i).then(function(){0!==t.length&&1===o.writeDocument&&E(t,e),"function"==typeof a&&a.call(!1)})}:function(){var i=0;!function r(){i>=t.length?"function"==typeof a&&a.call(!1):n(t[i],function(){1===o.writeDocument&&E([t[i]],e),i++,r()})}()})()},D=new function(){for(var t="",e=48;e<=122;e++)e>=58&&e<=64||e>=91&&e<=96||(t+=String.fromCharCode(e));var a=(t=(t=t.replace(/[aeiouAEIOU01]/g,"")).slice(0,18)+"$-_+!*"+t.slice(18)).length,n=location.host.length,o=-1,i="",r="";this.encode=function(e){i=encodeURIComponent(e).replace(/\./g,"&dot"),r="",o=-1;for(var c=0;c<i.length;c++)o=t.indexOf(i.charAt(c)),r+=o<0?i.charAt(c):t.charAt((o+n)%a);return r}};this.run=function(){o.dataCss=f(o.dataCss.join(",").replace(/_css/g,J).split(",")),o.dataJs=f(o.dataJs.join(",").replace(/_js/g,J).split(",")),s=r(l),d=r(24);var e=function(){var e;o.showLoadCount&&(e=(new Date).getTime()-h,t.headLoaderHistory=void 0!==t.headLoaderHistory?t.headLoaderHistory:[],void 0!==t.showLoadCountTimeout&&clearTimeout(t.showLoadCountTimeout),t.showLoadCountTimeout=setTimeout(function(){u>0&&(t.headLoaderHistory=t.headLoaderHistory.concat(new Array(u-1).fill(0),e));var a=0,n=0;t.headLoaderHistory.length>0&&(a=t.headLoaderHistory.reduce(function(t,e){return t+e}),n=Math.ceil(a/t.headLoaderHistory.length)),console.log("当前页面使用headLoader"+(o.multiLoad?"并行":"串行")+"网络请求%c"+u+"个%cJS/CSS文件，程序用时%c"+e+"毫秒%c，累计网络请求%c"+t.headLoaderHistory.length+"个%cJS/CSS文件，单文件平均用时%c"+n+"毫秒","color:#1b8884","","color:#1b8884","","color:#1b8884","","color:#1b8884","")},3e3)),"function"==typeof o.callback&&o.callback.call(!1)};A(o.dataCss,"css",function(){A(o.dataJs,"js",e)})}};for(var a=document.getElementsByTagName("script"),n=void 0,o=[],i=[],r=void 0,c=!1,l=2,s="",d="",u=0,h=(new Date).getTime(),f=0;f<a.length;f++)if(a[f].hasAttribute("src")&&a[f].getAttribute("src").indexOf(atob("aGVhZExvYWRlci4="))>=0){n=a.item(f);break}if(!n)return console.log&&console.log("%c"+decodeURIComponent(atob("JUU5JTk0JTk5JUU4JUFGJUFGJUU2JThGJTkwJUU3JUE0JUJBJTNBJUU3JUE4JThCJUU1JUJBJThGJUU2JTlDJUFBJUU2JTg4JTkwJUU1JThBJTlGJUU2JTg5JUE3JUU4JUExJThDJTJDJUU2JThGJTkyJUU0JUJCJUI2JUU1JTkwJThEJUU3JUE3JUIwJUU0JUI4JUJBaGVhZExvYWRlci5qcyVFNiU4OCU5NiVFOCU4MCU4NWhlYWRMb2FkZXIubWluLmpzJUU2JUIzJUE4JUU2JTg0JThGJUU1JUE0JUE3JUU1JUIwJThGJUU1JTg2JTk5LiVFNSVBNiU4MiVFNiU5QyU4OSVFNyU5NiU5MSVFOSU5NyVBRSVFOCVBRiVCNyVFOCVBRSVCRiVFOSU5NyVBRSUzQWh0dHBzJTNBJTJGJTJGZ2l0aHViLmNvbSUyRmJhaXl1a2V5JTJGaGVhZExvYWRlcg==")),"color:#F00"),!1;var p=console.log&&".min"!==e,m="static"===location.pathname.split("/")[1]?"/static":"/",J=location.pathname.replace(m,"").replace(".html","");""===location.pathname.replace(/.*\//,"").replace(".html","")&&(J+="index"),J=0===J.indexOf("/")?J.substr(1):J,n.hasAttribute("data-elfFrame")?c=["true",""].includes(n.getAttribute("data-elfFrame")):p&&console.log('%c友情提示:script标签未设置"data-elfFrame"属性,默认为false.',"color:#69F;"),n.hasAttribute("data-lifecycle")?l=Number(n.getAttribute("data-lifecycle")):p&&console.log('%c友情提示:script标签未设置"data-lifecycle"属性,默认为'+l+"小时.","color:#69F;"),n.hasAttribute("data-dir")?r=n.getAttribute("data-dir"):p&&console.log('%c友情提示:script标签未设置"data-dir"属性.',"color:#69F;"),n.hasAttribute("data-css")?i=n.getAttribute("data-css").split(","):p&&console.log('%c友情提示:script标签未设置"data-css"属性',"color:#69F;"),n.hasAttribute("data-js")?o=n.getAttribute("data-js").split(","):p&&console.log('%c友情提示:script标签未设置"data-js"属性',"color:#69F;"),a.length>0&&""!==e&&a.item(0).remove();var g=new headLoader;r&&(g.dataDir=r),g.dataCss=i,g.dataJs=o,g.dataLifecycle=l,g.run()}(window.location.origin===window.top.location.origin?window.top:window);
