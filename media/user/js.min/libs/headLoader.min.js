/**
 * headLoader用于加载页面资源及管理css, js缓存，使页面加载实现快速响应，节省网络流量，降低服务器压力的目的。
 * @global : headLoader
 * @author: 宇哥 baiyukey@qq.com
 * @link : https://github.com/baiyukey/headLoader
 * @version : 1.0.1
 * @copyright : http://www.uielf.com
 */
var headLoader=void 0;!function(t){var e=/^((192\.168|172\.([1][6-9]|[2]\d|3[01]))(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){2}|10(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){3})|(localhost)$/.test(t.location.hostname)?"":".min";headLoader=function(a){var n=a||{};this.dataDir=n.dataDir||"",this.dataCss=n.dataCss||[],this.dataJs=n.dataJs||[],this.callback=n.callback||null,this.multiLoad=n.multiLoad||".min"===e,this.showLoadCount=n.showLoadCount||!1,this.writeDocument=void 0!==n.writeDocument?this.writeDocument:1;var o=this,i=function(t){return 0===t.indexOf("http://")||0===t.indexOf("https://")},r=function(t){var a=new Date,n=t||2;return n=Math.min(24,n),""===e?""+a.getTime():""+(a.getMonth()+1)+a.getDate()+Math.ceil((a.getHours()+1)/n)},u=function(t){for(var e=[],a="",n=0;n<t.length;n++)0!==(a=t[n].replace(/^(\s*)|(\s*)$/g,"")).length&&e.indexOf(a)<0&&e.push(a);return e},h=function(t,e){e.length>0&&e.forEach(function(e){t.setAttribute(e.split("=")[0],e.split("=")[1])})};void 0===t.headLoaderCache&&(t.headLoaderCache={});var p=function(e,a){var n,o;n=E.encode(e),o=a,t.headLoaderCache[n]=o,t.localStorage.setItem(n,o)},f=function(e){return a=E.encode(e),t.headLoaderCache[a]||(t.headLoaderCache[a]=t.localStorage.getItem(a)),t.headLoaderCache[a];var a},J=function(t,a){return(o.dataDir+a+e+"/"+t.split("|")[0]).replace("."+a,"")+e+"."+a},g=function(t,a){return((o.dataDir+a+e+"/"+t.split("|")[0]).replace("."+a,"")+e).replace(/\./g,"_")},U=function(t,e){if(i(t))return w(t),"function"==typeof e&&e(),!1;var a=J(t,"js")+"?v="+c,n=g(t,"js"),o=void 0,r=f(n),s=f(n+"_version");null===r||s!==c?(window.XMLHttpRequest?o=new XMLHttpRequest:window.ActiveXObject&&(o=new ActiveXObject("Microsoft.XMLHTTP")),void 0!==o&&(o.open("GET",a),o.send(null),o.onreadystatechange=function(){4===Number(o.readyState)&&200===Number(o.status)&&(r=o.responseText,p(n,r=null===r?"":r),p(n+"_version",c),l++,"function"==typeof e&&e())})):"function"==typeof e&&e()},v=function(t,e){if(i(t))return L(t),"function"==typeof e&&e(),!1;var a=J(t,"css")+"?v="+c,n=g(t,"css"),r=void 0,d=f(n),u=f(n+"_version");null===d||u!==c?(window.XMLHttpRequest?r=new XMLHttpRequest:window.ActiveXObject&&(r=new ActiveXObject("Microsoft.XMLHTTP")),void 0!==r&&(r.open("GET",a),r.send(null),r.onreadystatechange=function(){4===Number(r.readyState)&&200===Number(r.status)&&(d=(d=(d=null===(d=r.responseText)?"":d).replace(/\[dataDir]/g,o.dataDir)).replace(/\[v]/g,s),p(n,d),p(n+"_version",c),l++,"function"==typeof e&&e())})):"function"==typeof e&&e()},T=function(t,a){if(""!==e)return Function(a)(),!1;var n=document.getElementsByTagName("HEAD").item(0),o=document.createElement("script");h(o,t.split("|").splice(1)),o.setAttribute("type","text/javascript"),o.setAttribute("data-name",t.split("|")[0].replace(".js","")+e),o.innerHTML=a,n.appendChild(o)},y=function(t,a){if(0===document.getElementsByTagName("HEAD").length)return!1;var n=document.getElementsByTagName("HEAD").item(0),i=void 0;if(o.multiLoad&&(i=document.getElementsByTagName("style").item(0)))return i.innerHTML+=a,!1;i=document.createElement("style"),h(i,t.split("|").splice(1)),i.setAttribute("type","text/css"),i.setAttribute("data-name",t.split("|")[0].replace(".css","")+e),i.innerHTML=a,n.appendChild(i)},w=function(t){if(0===document.getElementsByTagName("HEAD").length)return!1;var a=document.getElementsByTagName("HEAD").item(0),n=document.createElement("script");h(n,t.split("|").splice(1)),n.src=0===t.indexOf("http")?t.split("|")[0]:t.split("|")[0].replace(".js","")+e+".js?"+c,a.appendChild(n)},L=function(t){if(0===document.getElementsByTagName("HEAD").length)return!1;var a=document.getElementsByTagName("HEAD").item(0),n=document.createElement("link");h(n,t.split("|").splice(1)),n.type="text/css",n.rel="stylesheet",n.rev="stylesheet",n.media="screen",n.href=0===t.indexOf("http")?t.split("|")[0]:t.split("|")[0].replace(".css","")+e+".css?"+c,a.appendChild(n)},C=function(t,a){var n=void 0,i={JS:T,CSS:y}[a.toUpperCase()],r=t.map(function(t){return n=(o.dataDir+a+e+"/"+t.replace(/(\.js)|(\.css)/g,"")+e).replace(/\./g,"_"),f(n)}).join("js"===a?";":" ");i(1===t.length?t[0]:a+"_"+c,r)},b=function(t,e,a){if(0===document.getElementsByTagName("HEAD").length)return!1;if(!t||0===t.length)return"function"==typeof a&&a.call(!1),!1;var n={JS:U,CSS:v}[e.toUpperCase()];(o.multiLoad?function(){if(!t||0===t.length)return"function"==typeof a&&a.call(!1),!1;var i=new Array(t.length).fill(0).map(function(e,a){return new Promise(function(e){n(t[a],function(){return e("success")})})});Promise.all(i).then(function(){0!==t.length&&1===o.writeDocument&&C(t,e),"function"==typeof a&&a.call(!1)})}:function(){var i=0;!function r(){i>=t.length?"function"==typeof a&&a.call(!1):n(t[i],function(){1===o.writeDocument&&C([t[i]],e),i++,r()})}()})()},E=new function(){for(var t="",e=48;e<=122;e++)e>=58&&e<=64||e>=91&&e<=96||(t+=String.fromCharCode(e));var a=(t=(t=t.replace(/[aeiouAEIOU01]/g,"")).slice(0,18)+"$-_+!*"+t.slice(18)).length,n=location.host.length,o=-1,i="",r="";this.encode=function(e){i=encodeURIComponent(e).replace(/\./g,"&dot"),r="",o=-1;for(var c=0;c<i.length;c++)o=t.indexOf(i.charAt(c)),r+=o<0?i.charAt(c):t.charAt((o+n)%a);return r}};this.run=function(){o.dataCss=u(o.dataCss.join(",").replace(/_css/g,m).split(",")),o.dataJs=u(o.dataJs.join(",").replace(/_js/g,m).split(",")),c=r(),s=r(24);var e=function(){var e;o.showLoadCount&&(e=(new Date).getTime()-d,t.headLoaderHistory=void 0!==t.headLoaderHistory?t.headLoaderHistory:[],void 0!==t.showLoadCountTimeout&&clearTimeout(t.showLoadCountTimeout),t.showLoadCountTimeout=setTimeout(function(){l>0&&(t.headLoaderHistory=t.headLoaderHistory.concat(new Array(l-1).fill(0),e));var a=0,n=0;t.headLoaderHistory.length>0&&(a=t.headLoaderHistory.reduce(function(t,e){return t+e}),n=Math.ceil(a/t.headLoaderHistory.length)),console.log("当前页面使用headLoader"+(o.multiLoad?"并行":"串行")+"网络请求%c"+l+"个%cJS/CSS文件，程序用时%c"+e+"毫秒%c，累计网络请求%c"+t.headLoaderHistory.length+"个%cJS/CSS文件，单文件平均用时%c"+n+"毫秒","color:#1b8884","","color:#1b8884","","color:#1b8884","","color:#1b8884","")},3e3)),"function"==typeof o.callback&&o.callback.call(!1)};b(o.dataCss,"css",function(){b(o.dataJs,"js",e)})}};for(var a=document.getElementsByTagName("script"),n=void 0,o=[],i=[],r=void 0,c="",s="",l=0,d=(new Date).getTime(),u=0;u<a.length;u++)if(a[u].hasAttribute("src")&&a[u].getAttribute("src").indexOf(atob("aGVhZExvYWRlci4="))>=0){n=a.item(u);break}if(!n)return console.log&&console.log("%c"+decodeURIComponent(atob("JUU5JTk0JTk5JUU4JUFGJUFGJUU2JThGJTkwJUU3JUE0JUJBJTNBJUU3JUE4JThCJUU1JUJBJThGJUU2JTlDJUFBJUU2JTg4JTkwJUU1JThBJTlGJUU2JTg5JUE3JUU4JUExJThDJTJDJUU2JThGJTkyJUU0JUJCJUI2JUU1JTkwJThEJUU3JUE3JUIwJUU0JUI4JUJBaGVhZExvYWRlci5qcyVFNiU4OCU5NiVFOCU4MCU4NWhlYWRMb2FkZXIubWluLmpzJUU2JUIzJUE4JUU2JTg0JThGJUU1JUE0JUE3JUU1JUIwJThGJUU1JTg2JTk5LiVFNSVBNiU4MiVFNiU5QyU4OSVFNyU5NiU5MSVFOSU5NyVBRSVFOCVBRiVCNyVFOCVBRSVCRiVFOSU5NyVBRSUzQWh0dHBzJTNBJTJGJTJGZ2l0aHViLmNvbSUyRmJhaXl1a2V5JTJGaGVhZExvYWRlcg==")),"color:#F00"),!1;var h=console.log&&n.getAttribute("src").indexOf(".min")<0,p="static"===location.pathname.split("/")[1]?"/static":"/",m=location.pathname.replace(p,"").replace(".html","");""===location.pathname.replace(/.*\//,"").replace(".html","")&&(m+="index"),m=0===m.indexOf("/")?m.substr(1):m,n.hasAttribute("data-update-cacheVersion")?n.getAttribute("data-update-cacheVersion"):h&&console.log('%c友情提示:script标签无"data-update-cacheVersion"属性,默认为false.',"color:#69F;"),n.hasAttribute("data-dir")?r=n.getAttribute("data-dir"):h&&console.log('%c友情提示:script标签无"data-dir"属性.',"color:#69F;"),n.hasAttribute("data-css")?i=n.getAttribute("data-css").split(","):h&&console.log('%c友情提示:script标签无"data-css"属性',"color:#69F;"),n.hasAttribute("data-js")?o=n.getAttribute("data-js").split(","):h&&console.log('%c友情提示:script标签无"data-js"属性',"color:#69F;"),a.length>0&&""!==e&&a.item(0).remove();var f=new headLoader;r&&(f.dataDir=r),f.dataCss=i,f.dataJs=o,f.run()}(window.location.origin===window.top.location.origin?window.top:window);
