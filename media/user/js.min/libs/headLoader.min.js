let headLoader;!function(_global){let min=/^((192\.168|172\.([1][6-9]|[2]\d|3[01]))(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){2}|10(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){3})|(localhost)$/.test(_global.location.hostname)?"":".min";headLoader=function(_val){let val=_val||{};this.dataDir=val.dataDir||"",this.dataCss=val.dataCss||[],this.dataJs=val.dataJs||[],this.callback=val.callback||null,this.version="v0.31.00",this.multiLoad=val.multiLoad||".min"===min,this.showLoadCount=val.showLoadCount||!1;let that=this,isLink=t=>0===t.indexOf("http://")||0===t.indexOf("https://"),getCacheVersion=function(t){let e=new Date,a=t||2;return a=Math.min(24,a),""===min?""+e.getTime():""+(e.getMonth()+1)+e.getDate()+Math.ceil((e.getHours()+1)/a)},standardized=function(t){let e=[],a="";for(let i=0;i<t.length;i++)0!==(a=t[i].replace(/^(\s*)|(\s*)$/g,"")).length&&e.indexOf(a)<0&&e.push(a);return e},setAttribute=function(t,e){e.length>0&&e.forEach(function(e){t.setAttribute(e.split("=")[0],e.split("=")[1])})};void 0===_global.headLoaderCache&&(_global.headLoaderCache={});let setCache=function(t,e){_global.headLoaderCache[t]=e,_global.localStorage.setItem(t,e)},getCache=function(t){let e=_global.headLoaderCache[t],a=_global.localStorage.getItem(t);return!e&&a&&(_global.headLoaderCache[t]=a),_global.headLoaderCache[t]},getUrl=function(t,e){return(that.dataDir+e+min+"/"+t.split("|")[0]).replace("."+e,"")+min+"."+e},getCacheKey=function(t,e){return((that.dataDir+e+min+"/"+t.split("|")[0]).replace("."+e,"")+min).replace(/\./g,"_")},loadJs=function(t,e){if(isLink(t))return linkJs(t),"function"==typeof e&&e(),!1;let a,i=getUrl(t,"js")+"?v="+cacheVersion,o=getCacheKey(t,"js"),n=getCache(o),s=getCache(o+"_version");null===n||s!==cacheVersion?(window.XMLHttpRequest?a=new XMLHttpRequest:window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP")),void 0!==a&&(a.open("GET",i),a.send(null),a.onreadystatechange=function(){4===Number(a.readyState)&&200===Number(a.status)&&(n=a.responseText,setCache(o,n=null===n?"":n),setCache(o+"_version",cacheVersion),mediaLength++,"function"==typeof e&&e())})):"function"==typeof e&&e()},loadCss=function(t,e){if(isLink(t))return linkCss(t),"function"==typeof e&&e(),!1;let a,i=getUrl(t,"css")+"?v="+cacheVersion,o=getCacheKey(t,"css"),n=getCache(o),s=getCache(o+"_version");null===n||s!==cacheVersion?(window.XMLHttpRequest?a=new XMLHttpRequest:window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP")),void 0!==a&&(a.open("GET",i),a.send(null),a.onreadystatechange=function(){4===Number(a.readyState)&&200===Number(a.status)&&(n=(n=(n=null===(n=a.responseText)?"":n).replace(/\[dataDir]/g,that.dataDir)).replace(/\[v]/g,mediaCacheVersion),setCache(o,n),setCache(o+"_version",cacheVersion),mediaLength++,"function"==typeof e&&e())})):"function"==typeof e&&e()},writeJs=function(_url,_text){if(0===document.getElementsByTagName("HEAD").length&&requestAnimationFrame(writeJs),""!==min)return eval(_text),!1;let head=document.getElementsByTagName("HEAD").item(0),thisTag=document.createElement("script");setAttribute(thisTag,_url.split("|").splice(1)),thisTag.setAttribute("type","text/javascript"),thisTag.setAttribute("data-name",_url.split("|")[0].replace(".js","")+min),thisTag.innerHTML=_text,head.appendChild(thisTag)},writeCss=function(t,e){if(0===document.getElementsByTagName("HEAD").length)return!1;let a,i=document.getElementsByTagName("HEAD").item(0);if(that.multiLoad&&(a=document.getElementsByTagName("style").item(0)))return a.innerHTML+=e,!1;a=document.createElement("style"),setAttribute(a,t.split("|").splice(1)),a.setAttribute("type","text/css"),a.setAttribute("data-name",t.split("|")[0].replace(".css","")+min),a.innerHTML=e,i.appendChild(a)},linkJs=function(t){if(0===document.getElementsByTagName("HEAD").length)return!1;let e=document.getElementsByTagName("HEAD").item(0),a=document.createElement("script");setAttribute(a,t.split("|").splice(1)),a.src=0===t.indexOf("http")?t.split("|")[0]:t.split("|")[0].replace(".js","")+min+".js?"+cacheVersion,e.appendChild(a)},linkCss=function(t){if(0===document.getElementsByTagName("HEAD").length)return!1;let e=document.getElementsByTagName("HEAD").item(0),a=document.createElement("link");setAttribute(a,t.split("|").splice(1)),a.type="text/css",a.rel="stylesheet",a.rev="stylesheet",a.media="screen",a.href=0===t.indexOf("http")?t.split("|")[0]:t.split("|")[0].replace(".css","")+min+".css?"+cacheVersion,e.appendChild(a)},writeThese=function(t,e){let a,i={JS:writeJs,CSS:writeCss}[e.toUpperCase()],o=t.map(t=>(a=(that.dataDir+e+min+"/"+t.replace(/(\.js)|(\.css)/g,"")+min).replace(/\./g,"_"),getCache(a))).join("js"===e?";":" ");i(1===t.length?t[0]:e+"_"+cacheVersion,o)},showLoadCount=function(){let t=(new Date).getTime()-startTime;_global.headLoaderHistory=void 0!==_global.headLoaderHistory?_global.headLoaderHistory:[],void 0!==_global.showLoadCountTimeout&&clearTimeout(_global.showLoadCountTimeout),_global.showLoadCountTimeout=setTimeout(()=>{mediaLength>0&&(_global.headLoaderHistory=_global.headLoaderHistory.concat(new Array(mediaLength-1).fill(0),t));let e=0,a=0;_global.headLoaderHistory.length>0&&(e=_global.headLoaderHistory.reduce((t,e)=>t+e),a=Math.ceil(e/_global.headLoaderHistory.length)),console.log("当前页面使用headLoader"+(that.multiLoad?"并行":"串行")+"网络请求%c"+mediaLength+"个%cJS/CSS文件，程序用时%c"+t+"毫秒%c，累计网络请求%c"+_global.headLoaderHistory.length+"个%cJS/CSS文件，单文件平均用时%c"+a+"毫秒","color:#1b8884","","color:#1b8884","","color:#1b8884","","color:#1b8884","")},3e3)},loadThese=function(t,e,a){if(0===document.getElementsByTagName("HEAD").length)return!1;if(!t||0===t.length)return"function"==typeof a&&a.call(!1),!1;let i={JS:loadJs,CSS:loadCss}[e.toUpperCase()];(that.multiLoad?function(){if(!t||0===t.length)return"function"==typeof a&&a.call(!1),!1;let o=new Array(t.length).fill(0).map((e,a)=>new Promise(function(e){i(t[a],()=>e("success"))}));Promise.all(o).then(()=>{0!==t.length&&writeThese(t,e),"function"==typeof a&&a.call(!1)})}:function(){let o=0,n=function(){o>=t.length?"function"==typeof a&&a.call(!1):i(t[o],()=>{writeThese([t[o]],e),o++,n()})};n()})()};this.run=function(){that.dataCss=standardized(that.dataCss.join(",").replace(/_css/g,modDir).split(",")),that.dataJs=standardized(that.dataJs.join(",").replace(/_js/g,modDir).split(",")),cacheVersion=getCacheVersion(),mediaCacheVersion=getCacheVersion(24);let t=function(){that.showLoadCount&&showLoadCount(),"function"==typeof that.callback&&that.callback.call(!1)};loadThese(that.dataCss,"css",function(){loadThese(that.dataJs,"js",t)})}};let allScript=document.getElementsByTagName("script"),thisScript,dataJs=[],dataCss=[],dataDir,update=!1,cacheVersion="",mediaCacheVersion="",mediaLength=0,startTime=(new Date).getTime();for(let t=0;t<allScript.length;t++)if(allScript[t].hasAttribute("src")&&allScript[t].getAttribute("src").indexOf(atob("aGVhZExvYWRlci4="))>=0){thisScript=allScript.item(t);break}if(!thisScript)return console.log&&console.log("%c"+decodeURIComponent(atob("JUU5JTk0JTk5JUU4JUFGJUFGJUU2JThGJTkwJUU3JUE0JUJBJTNBJUU3JUE4JThCJUU1JUJBJThGJUU2JTlDJUFBJUU2JTg4JTkwJUU1JThBJTlGJUU2JTg5JUE3JUU4JUExJThDJTJDJUU2JThGJTkyJUU0JUJCJUI2JUU1JTkwJThEJUU3JUE3JUIwJUU0JUI4JUJBaGVhZExvYWRlci5qcyVFNiU4OCU5NiVFOCU4MCU4NWhlYWRMb2FkZXIubWluLmpzJUU2JUIzJUE4JUU2JTg0JThGJUU1JUE0JUE3JUU1JUIwJThGJUU1JTg2JTk5LiVFNSVBNiU4MiVFNiU5QyU4OSVFNyU5NiU5MSVFOSU5NyVBRSVFOCVBRiVCNyVFOCVBRSVCRiVFOSU5NyVBRSUzQWh0dHBzJTNBJTJGJTJGZ2l0aHViLmNvbSUyRmJhaXl1a2V5JTJGaGVhZExvYWRlcg==")),"color:#F00"),!1;let reLog=console.log&&thisScript.getAttribute("src").indexOf(".min")<0,staticDir="static"===location.pathname.split("/")[1]?"/static":"/",modDir=location.pathname.replace(staticDir,"").replace(".html","");""===location.pathname.replace(/.*\//,"").replace(".html","")&&(modDir+="index"),modDir=0===modDir.indexOf("/")?modDir.substr(1):modDir,thisScript.hasAttribute("data-update-cacheVersion")?update=thisScript.getAttribute("data-update-cacheVersion"):reLog&&console.log('%c友情提示:script标签无"data-update-cacheVersion"属性,默认为false.',"color:#69F;"),thisScript.hasAttribute("data-dir")?dataDir=thisScript.getAttribute("data-dir"):reLog&&console.log('%c友情提示:script标签无"data-dir"属性.',"color:#69F;"),thisScript.hasAttribute("data-css")?dataCss=thisScript.getAttribute("data-css").split(","):reLog&&console.log('%c友情提示:script标签无"data-css"属性',"color:#69F;"),thisScript.hasAttribute("data-js")?dataJs=thisScript.getAttribute("data-js").split(","):reLog&&console.log('%c友情提示:script标签无"data-js"属性',"color:#69F;"),allScript.length>0&&""!==min&&allScript.item(0).remove();let thisLoader=new headLoader;dataDir&&(thisLoader.dataDir=dataDir),thisLoader.dataCss=dataCss,thisLoader.dataJs=dataJs,thisLoader.run()}(window.location.origin===window.top.location.origin?window.top:window);